name: PMbootstrap Build for Xiaomi Gemini
# 定义触发事件（推送代码时触发）
on: [push]
jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install system dependencies
        run: |
          sudo apt update
          sudo apt install -y python3 python3-pip git sudo

      - name: Shallow clone pmbootstrap (depth 1)
        run: |
          git clone --depth 1 https://github.com/postmarketOS/pmbootstrap.git
          cd pmbootstrap
          pip install --user .
          echo "PATH=/data/data/com.termux/files/home/.local/bin:/data/data/com.termux/files/usr/bin" >> 

      - name: Initialize pmbootstrap
        run: |
          pmbootstrap --version
          pmbootstrap init <<EOF
          gemini
          postmarketOS Edge
          mainline
          none
          ext4
          4
          EOF

      - name: Build the image
        run: pmbootstrap build
